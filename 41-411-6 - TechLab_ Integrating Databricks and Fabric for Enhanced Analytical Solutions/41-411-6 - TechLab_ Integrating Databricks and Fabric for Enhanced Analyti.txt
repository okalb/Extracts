

Id                                               : 169917
Number                                           : 41-411-6
Name                                             : TechLab: Integrating Databricks and Fabric for Enhanced Analytical Solutions
SeriesId                                         : 33182
OrganizationId                                   : 4250
PlatformId                                       : 2
EnableCodeLabFabric                              : False
ParentId                                         : 
ParentName                                       : 
InheritEnvironment                               : False
EnvironmentLabProfileId                          : 
InheritContent                                   : False
ContentLabProfileId                              : 
MinInstanceStorageGb                             : 20
DevelopmentStatusId                              : 10
CurrentDevelopmentStatusId                       : 10
DurationMinutes                                  : 4
DurationUnit                                     : 10
AllowTimeExtensions                              : True
TimeExtensionMinutes                             : 15
TimeExtensionShowNotificationMinutes             : 10
Level                                            : 300
EvaluationId                                     : 105
AdvertisingCampaignId                            : 
Description                                      : 
Enabled                                          : True
EnableBugReporting                               : False
BugReportEmailAddress                            : support@learnondemand.zendesk.com
OwnerName                                        : 
OwnerEmail                                       : 
OverrideCloudPortalUrl                           : False
CloudPortalUrl                                   : https://portal.azure.com
AppendLabDataToCloudPortalUrl                    : False
NetworksJson                                     : {@{Id=213580; Description=; Name=WAN; PhysicalNetworkAdapterName=; IsStudentVisible=False; DevelopmentOnly=False; Type=10; VLanId=; GatewayAddress=192.168.10.1; SubnetMask=255.255.255.0; EnableDhcp=True; DhcpStart=192.168.10.100; DhcpEnd=192.168.10.200; AddressPrefix=10.0.0.0/24; IsSharedClassNetwork=False; SubnetId=; AccessControlListId=; AccessControlListName=; CustomNetworkId=; CustomNetworkName=; EnableNat=False; EnableEndpoints=False; EndpointGatewayIpAddress=; EndpointGatewaySubnetMask=}}
SharedClassNetworksJson                          : {}
ContainerNetworksJson                            : {}
HasVirtualMachinePool                            : False
VirtualMachinesJson                              : {@{Id=404803; DisplayName=CSU-Fabric-Default; ReplacementTokenAlias=CSU-Fabric-Default; AutoStart=True; InitialSystemTimeDate=; InitialSystemTimeTime=; WaitForHeartbeat=True; IsHostTimeSyncEnabled=True; IsStudentVisible=True; StartupDelaySeconds=; ResumeOrder=0; ResumeDelaySeconds=; AllowRevert=False; TrackLabInstanceData=False; AllowDesktopConnections=True; AllowSshConnections=False; FloppyMediaId=; DvdMediaId=; TargetResourceGroupId=; CloudOperatingSystemType=0; DiskType=0; UseCloudHybridBenefit=False; PlatformId=2; UseAzureMarketplaceImage=False; Username=Admin; Password=Pa$$w0rd; RequiresPremiumCloudFeatures=False; ProfileName=CSU-Fabric-Default; ProfileId=267409; HasDvdDrive=True; HasFloppyDrive=False; NetworkConnections=System.Object[]; Endpoints=System.Object[]}}
VirtualMachinePoolJson                           : {}
VirtualMachinePoolMembersJson                    : {}
DefaultVirtualMachineProfileId                   : 267409
DefaultVirtualMachineLabPoolProfileId            : 
DefaultResourceId                                : 
RemovableMediaJson                               : {}
ContainerImagesJson                              : {}
ContainerVolumesJson                             : {}
CloudResourceGroupsJson                          : {@{Id=19495; DisplayName=CSU_RG; ReplacementTokenAlias=CSU_RG; LabProfileId=169917; EnableDatacenterOverride=False; AccessControlPolicies=System.Object[]; CloudQuotas=System.Object[]; DatacenterOverrideId=; CloudTemplateModels=System.Object[]; TemplateParameterValues=System.Object[]}}
CloudTemplateValuesJson                          : 
CloudDatacenterAvailabilityJson                  : {@{DatacenterId=68; MaxLabInstances=}}
CloudPortalCredentialProfilesJson                : {@{LocalId=1; ResourceGroupPermissionMappings=System.Object[]; SubscriptionPermissionMappings=System.Object[]; AccountNamePrefix=CSU_User1-; ReplacementTokenAlias=CSU_User1}}
CloudSubscriptionInstancePoliciesJson            : {@{Id=3994; Description=; Enabled=True; IsGlobalPolicy=False; CloudPlatformId=10; Name=48-404 CSU ACP}}
CloudScriptContextPoliciesJson                   : {}
CloudSubscriptionInstanceQuotasJson              : {}
CloudPlatform                                    : 10
CloudPlatformListJson                            : {@{Key=10; Value=Azure}, @{Key=11; Value=AWS}, @{Key=12; Value=GCP}, @{Key=13; Value=Unknown}}
CloudSecurityReviewEventHasOccurred              : False
EnableAutomaticPortalLogin                       : False
DeployDefaultResources                           : False
CloudSubscriptionPoolId                          : 797
CloudSubscriptionPoolName                        : TechMaster MSLEARN - CSS
CloudDeploymentFailureBehavior                   : 10
EnableAzureTAP                                   : False
OverrideScriptContext                            : False
RunScriptAsAdmin                                 : False
ExpectedCloudCost                                : 
InheritPreinstancing                             : False
EnablePreinstancing                              : False
SavePreinstances                                 : False
PreinstanceSaveDelaySeconds                      : 0
PreinstanceBatchSize                             : 1
PreinstanceStockLevel                            : 0
PreinstanceDatacenterStockLevelsJson             : 
EnableCloudCredentialAssignment                  : False
PreinstanceScheduleJson                          : {}
InheritLifeCycleActions                          : False
LifeCycleActionsJson                             : {@{Id=94155; Name=Deploy sample database; SortOrder=0; Event=0; ActionType=40; Url=; AppendLabData=False; Synchronous=False; HttpVerb=0; HttpContent=; HttpHeaders=; Timeout=120; Subject=; Notification=; Script=$resourceGroupName = 'CSU_RG'
                                                   $templateUri = "https://raw.githubusercontent.com/LODSContent/Tom-Demo/master/template.json"
                                                   $sqlServerName = "sql@lab.LabInstance.Id"
                                                   $maxAttempts = 10
                                                   
                                                   #Register SQL so we can create server
                                                   Register-AzResourceProvider -ProviderNamespace Microsoft.Sql
                                                   
                                                   # Function to check if the SQL server exists
                                                   function Test-SqlServerExists {
                                                       param (
                                                           [string]$resourceGroupName,
                                                           [string]$sqlServerName
                                                       )
                                                       try {
                                                           $server = Get-AzSqlServer -ResourceGroupName $resourceGroupName -ServerName $sqlServerName -ErrorAction Stop
                                                           return $true
                                                       } catch {
                                                           return $false
                                                       }
                                                   }
                                                   
                                                   # Check if the SQL server exists, create if it does not
                                                   if (-not (Test-SqlServerExists -resourceGroupName $resourceGroupName -sqlServerName $sqlServerName)) {
                                                       Write-Host "SQL server '$sqlServerName' not found. Creating new SQL server."
                                                       $location = (Get-AzResourceGroup -Name $resourceGroupName).Location
                                                       $adminUsername = "azureadmin1"
                                                       $adminPassword = ConvertTo-SecureString -String "@lab.CloudPortalCredential(CSU_User1).Password@lab.CloudPortalCredential(CSU_User1).Password" -AsPlainText -Force
                                                       $adminCredentials = New-Object -TypeName System.Management.Automation.PSCredential -ArgumentList $adminUsername, $adminPassword
                                                       New-AzSqlServer -ResourceGroupName $resourceGroupName -ServerName $sqlServerName -Location $location -ServerVersion "12.0" -SqlAdministratorCredentials $adminCredentials
                                                   } else {
                                                       Write-Host "SQL server '$sqlServerName' exists in resource group '$resourceGroupName'."
                                                   }
                                                   
                                                   $location = (Get-AzResourceGroup -Name $resourceGroupName).Location
                                                   
                                                   $params = @{
                                                       collation = "SQL_Latin1_General_CP1_CI_AS"
                                                       databaseName = "DB01"
                                                       tier = "GeneralPurpose"
                                                       skuName = "GP_S_Gen5_1"
                                                       maxSizeBytes = 34359738368
                                                       sampleName = "AdventureWorksLT"
                                                       serverLocation = $location
                                                       serverName = $sqlServerName
                                                       minCapacity = "0.5"
                                                       autoPauseDelay = 60
                                                       sqlLedgerTemplateLink = "https://sqlazureextension.hosting.portal.azure.net/sqlazureextension/Content/2.1.02687198/DeploymentTemplates/SqlLedger.json"
                                                       privateLinkPrivateDnsZoneFQDN = "privatelink.database.windows.net"
                                                       privateEndpointTemplateLink = "https://sqlazureextension.hosting.portal.azure.net/sqlazureextension/Content/2.1.02687198/DeploymentTemplates/PrivateEndpoint.json"
                                                       privateDnsForPrivateEndpointTemplateLink = "https://sqlazureextension.hosting.portal.azure.net/sqlazureextension/Content/2.1.02687198/DeploymentTemplates/PrivateDnsForPrivateEndpoint.json"
                                                       privateDnsForPrivateEndpointNicTemplateLink = "https://sqlazureextension.hosting.portal.azure.net/sqlazureextension/Content/2.1.02687198/DeploymentTemplates/PrivateDnsForPrivateEndpointNic.json"
                                                       privateDnsForPrivateEndpointIpConfigTemplateLink = "https://sqlazureextension.hosting.portal.azure.net/sqlazureextension/Content/2.1.02687198/DeploymentTemplates/PrivateDnsForPrivateEndpointIpConfig.json"
                                                       requestedBackupStorageRedundancy = "Local"
                                                       freeLimitExhaustionBehavior = "AutoPause"
                                                   }
                                                   
                                                   New-AzResourceGroupDeployment -ResourceGroupName $resourceGroupName -TemplateUri $templateUri -TemplateParameterObject $params
                                                   ; ScriptDescription=; ScriptGuidance=; ScriptSource=0; ScriptLanguage=0; ScriptTargetId=; ScriptEngineImageId=8; Delay=200; ErrorAction=0; CustomErrorNotification=; Enabled=True; NotificationName=; ScriptEnginePackagesJson=; RepeatScriptUntilTrue=False; RepeatScriptIntervalSeconds=60; RepeatScriptTimeoutMinutes=10; MaxRetries=4; CopilotPromptJson=}, @{Id=119958; Name=Add user to security group; SortOrder=0; Event=10; ActionType=40; Url=; AppendLabData=False; Synchronous=False; HttpVerb=0; HttpContent=; HttpHeaders=; Timeout=600; Subject=; Notification=; Script=$securityGroups = @("_Skillable-E5")
                                                   
                                                   foreach($secgrp in $securityGroups){
                                                       Add-AzADGroupMember -TargetGroupDisplayName $secgrp -MemberUserPrincipalName "@lab.CloudPortalCredential(CSU_User1).Username"
                                                   }; ScriptDescription=; ScriptGuidance=; ScriptSource=0; ScriptLanguage=0; ScriptTargetId=; ScriptEngineImageId=21; Delay=0; ErrorAction=0; CustomErrorNotification=; Enabled=True; NotificationName=; ScriptEnginePackagesJson=; RepeatScriptUntilTrue=False; RepeatScriptIntervalSeconds=60; RepeatScriptTimeoutMinutes=10; MaxRetries=0; CopilotPromptJson=}, @{Id=119959; Name=Remove user from Security group; SortOrder=0; Event=80; ActionType=40; Url=; AppendLabData=False; Synchronous=False; HttpVerb=0; HttpContent=; HttpHeaders=; Timeout=600; Subject=; Notification=; Script=# Remove user from Azure AD security groups in Skillable lab
                                                   $securityGroups = @("_Skillable-E5")
                                                   $userPrincipalName = "@lab.CloudPortalCredential(CSU_User1).Username"
                                                   
                                                   foreach ($secgrp in $securityGroups) {
                                                       try {
                                                           Remove-AzADGroupMember -GroupDisplayName $secgrp -MemberUserPrincipalName $userPrincipalName
                                                           Write-Output "Removed $userPrincipalName from group $secgrp successfully."
                                                       } catch {
                                                           Write-Warning "Failed to remove $userPrincipalName from group $secgrp: $_"
                                                       }
                                                   }
                                                   ; ScriptDescription=; ScriptGuidance=; ScriptSource=0; ScriptLanguage=0; ScriptTargetId=; ScriptEngineImageId=21; Delay=0; ErrorAction=0; CustomErrorNotification=; Enabled=True; NotificationName=; ScriptEnginePackagesJson=; RepeatScriptUntilTrue=False; RepeatScriptIntervalSeconds=60; RepeatScriptTimeoutMinutes=10; MaxRetries=0; CopilotPromptJson=}, @{Id=94156; Name=Assign Key Vault Administrator RBAC role; SortOrder=1; Event=0; ActionType=40; Url=; AppendLabData=False; Synchronous=False; HttpVerb=0; HttpContent=; HttpHeaders=; Timeout=600; Subject=; Notification=; Script=$user = '@lab.CloudPortalCredential(CSU_User1).Username'
                                                   $rg = '@lab.CloudResourceGroup(CSU_RG).Name'
                                                   $sub = '@lab.CloudSubscription.Id'
                                                   New-AzRoleAssignment -RoleDefinitionName "Key Vault Administrator" -SignInName $user -Scope /subscriptions/$sub/resourcegroups/$rg
                                                   
                                                   
                                                   ; ScriptDescription=; ScriptGuidance=; ScriptSource=0; ScriptLanguage=0; ScriptTargetId=; ScriptEngineImageId=8; Delay=220; ErrorAction=0; CustomErrorNotification=; Enabled=False; NotificationName=; ScriptEnginePackagesJson=; RepeatScriptUntilTrue=False; RepeatScriptIntervalSeconds=60; RepeatScriptTimeoutMinutes=10; MaxRetries=2; CopilotPromptJson=}...}
InheritTags                                      : False
QuickTagsJson                                    : {}
CustomTagsJson                                   : {@{TagValueId=1153; HasExpiration=False; ExpiresDate=; ExpiresTime=}, @{TagValueId=995; HasExpiration=False; ExpiresDate=; ExpiresTime=}, @{TagValueId=1291; HasExpiration=False; ExpiresDate=; ExpiresTime=}}
InheritStorageSettings                           : False
DatacenterAvailability                           : {130, 8}
StorageLoadingPriority                           : 20
LabHostTagsJson                                  : {@{Id=156; LaunchPolicy=0}}
LabFabricBuildSequence                           : 10
ThemeId                                          : 
EnableDisplayDelay                               : True
DisplayDelayValue                                : 2
DisplayDelayUnit                                 : 10
DisplayDelayMessage                              : 
IntroductionContentUrl                           : 
PreventIntroSkipping                             : False
IntroductionContentMinimumDisplaySeconds         : 30
EndUrl                                           : 
ShowMaxActiveLabInstances                        : False
MaxActiveLabInstances                            : 
MaxAllowedBuildMinutes                           : 120
MaxAllowedBuildTimeAction                        : 0
ShowInstructionsWhileBuilding                    : False
ShowTimer                                        : True
EnableNavigationWarning                          : True
ShowNavigationPane                               : True
NavigationBarWidth                               : 400
UseIntegratedBrowser                             : False
IntegratedBrowserContainerImageId                : 
IntegratedBrowserContainerImageName              : 
ShowContentTab                                   : True
ShowMachinesTab                                  : True
ShowSupportTab                                   : True
UseCustomContentTabLabel                         : False
CustomContentTabLabel                            : 
UseCustomMachinesTabLabel                        : False
CustomMachinesTabLabel                           : 
UseCustomSupportTabLabel                         : False
CustomSupportTabLabel                            : 
EnableCopyPaste                                  : True
ShowVirtualMachinePowerOptions                   : True
EnableInstanceLinkSharing                        : False
AllowLabInstanceNaming                           : False
AllowMultipleActiveInstancesPerUser              : True
EnableScheduledDisablement                       : False
ScheduledDisableDate                             : 
ScheduledDisableTime                             : 
PublishToOrganizationTemplateGallery             : False
TemplateGalleryReuseContainersAndVirtualMachines : False
TemplateGalleryLicenseAgreementId                : 
EnableVirtualMachineInstanceEditing              : False
EnableVncRecordingFeature                        : True
SharedClassEnvironmentRole                       : 0
AutoStartSharedClassEnvironment                  : False
ClassEnvironmentLabProfileId                     : 
AllowCancel                                      : True
AllowSave                                        : False
AllowDisconnect                                  : False
EnableAutoSave                                   : False
EnableLastConsoleSyncTimeout                     : True
LastConsoleSyncTimeoutMinutes                    : 15
EnableLastActivityTimeout                        : True
LastActivityTimeoutMinutes                       : 60
MinimumAutoSaveTimeInvestment                    : 5
MaxSnapshots                                     : 0
ExternalInstruction.Enabled                      : False
LtiOutcomeScoringPolicy                          : 0
LtiOutcomeScoringFormat                          : 0
LtiOutcomePassingScoreMinutes                    : 15
LtiOutcomePassingScoreTaskCompletePercentage     : 70
AllowAnonymousLaunch                             : False
AnonymousLaunchCode                              : 
AnonymousLaunchExpiresChecked                    : False
AnonymousLaunchExpiresDate                       : 
AnonymousLaunchExpiresTime                       : 
AllowAnonymousSave                               : False
AnonymousSaveMaxDays                             : 7
AnonymousSaveMaxSessions                         : 5
AuthenticatedLaunchLinksJson                     : {}
CloudCredentialPoolAssignmentsJson               : {}
ResourcesJson                                    : {}



